(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),l=(n(16),n(1)),s=n(2),i=n(4),u=n(3),d=n(5),h=n(6),f=n.n(h),m=(n(18),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={},n.onCoachClick=function(e){n.setState({selectedCoach:e}),n.props.onCoachSelect(e)},n.renderCoachButton=function(e){var t=n.state.selectedCoach===e?"selected":"";return r.a.createElement("div",{key:e},r.a.createElement("button",{onClick:function(){return n.onCoachClick(e)},className:t},e))},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"coachSelector"},r.a.createElement("h2",null,"Filter by coach"),r.a.createElement("div",{className:"coachList"},this.props.availableCoaches.map((function(t){return e.renderCoachButton(t)}))))}}]),t}(r.a.Component)),p=(n(19),[30,"minutes"]),v=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onPeriodClick=function(e){return function(){return n.props.onSlotSelect(e[0])}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"days",value:function(){for(var e=[],t=f()().startOf("day"),n=0;n<7;n++)e.push(t.clone()),t.add(1,"days");return e}},{key:"renderPeriod",value:function(e,t){return r.a.createElement("button",{key:e.toISOString(),onClick:this.onPeriodClick(t)},e.format("h:mm a"))}},{key:"renderDay",value:function(e){for(var t=this.props.slots,n=e.clone().startOf("day"),a=0,o=t[a],c=e.clone().endOf("day"),l=[];n.isBefore(c);){for(;null!=o&&f()(o.start).isBefore(n);)o=t[++a];for(var s=[];null!=o&&f()(o.start).isSame(n);)s.push(o),o=t[++a];s.length>0&&l.push(this.renderPeriod(n.clone(),s)),n.add.apply(n,p)}return r.a.createElement("div",{className:"day",key:e.toISOString()},r.a.createElement("h3",null,e.format("dddd")),l)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"slotSelector"},this.days().map((function(t,n){return e.renderDay(t)})))}}]),t}(r.a.Component),y=n(7),S=n.n(y),b=n(8),C={getSlots:function(){var e=Object(b.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:4567/slots");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),saveAppointment:function(){var e=Object(b.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("saving"),e.next=3,fetch("http://localhost:4567/appointments",{method:"POST",body:JSON.stringify(t)});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=(n(21),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},n.onCoachSelect=function(e){console.log("Selected coach:",e),n.setState({selectedCoach:e})},n.getCoaches=function(){var e=n.state.slots;if(null==e)return[];var t=e.reduce((function(e,t){return e.add(t.coach)}),new Set);return Array.from(t)},n.getSlots=function(){var e=n.state.slots;if(null==e)return[];var t=n.state.selectedCoach;return null==t?e:e.filter((function(e){return t.includes(e.coach)}))},n.onSlotSelect=function(e){console.log("selected",e),C.saveAppointment(e).then((function(){return n.setState({selectedSlot:e})}))},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.getSlots().then((function(t){e.setState({slots:t})}))}},{key:"renderLoading",value:function(){return r.a.createElement("div",null,"Loading...")}},{key:"renderUI",value:function(){var e=this.state.selectedSlot;if(null==e)return r.a.createElement(r.a.Fragment,null,r.a.createElement(m,{availableCoaches:this.getCoaches(),onCoachSelect:this.onCoachSelect}),r.a.createElement(v,{slots:this.getSlots(),onSlotSelect:this.onSlotSelect}));var t=f()(e.start).format("h:mma [on] dddd [the] Mo");return r.a.createElement("div",{className:"appointmentMade"},r.a.createElement("div",{className:"appointmentConfirmation"},r.a.createElement("h1",null,"Your appointment is all set!"),r.a.createElement("p",null,"You'll be talking to ",r.a.createElement("b",null,e.coach),r.a.createElement("br",null)," at ",r.a.createElement("b",null,t),".")))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},null==this.state.slots?this.renderLoading():this.renderUI())}}]),t}(r.a.Component));c.a.render(r.a.createElement(O,null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.0bf1bcb4.chunk.js.map